# 文字コード
set-window-option -g utf8 on
# コピーモード時のキーバインディング
set-window-option -g mode-keys vi
# ウィンドウ名の自動更新
set-window-option -g automatic-rename on
# タイトルの設定
set-option -g set-titles on
# ESC後の待ち時間(ミリ秒)
set -s escape-time 0
# ウィンドウ番号の開始位置:default 0
set-option -g base-index 1
# パネル番号の開始位置:default 0
set-option -g pane-base-index 1
# ステータスライン更新間隔(秒):default 15sec
set -g status-interval 5
# 履歴バッファ行数
set-option -g history-limit 10000
# alternate
#set-option -g alternate-screen off

# bell通知時のアクション
#  any: 他のウィンドウで発生したベルも通知
#  none: 全て音ベルを無視
set-option -g bell-action none
# bellを鳴らすかどうか
set-option -g bell-on-alert on
# bellを端末に通す代わりにメッセージを表示
set-option -g visual-bell on

# ウィンドウを監視
set-option -g monitor-activity on
# 監視中のウィンドウで動作があったときステータスラインに通知
set-option -g visual-activity on

# マウスによるウィンドウ選択
#   ONにすると複数ウィンドウ起動時にターミナルのマウスコピーが無効になる
#set-option -g mouse-select-window on
# マウスによるペイン選択
#   ONにすると複数ペイン起動時にターミナルのマウスコピーが無効になる
#set-option -g mouse-select-pane on
# マウスによるコピー
#   ONにするとターミナルのマウスコピーが無効になる
#set-window-option -g mode-mouse on
# UTF8(PuTTYではOFF推奨)
set-option -g mouse-utf8 on


#
# 256color対応
#
# $TERMをscreen-256colorに設定
set-option -g default-terminal "screen-256color"

# Color名称
#  black, red, green, yellow, blue, magenta, cyan, white
#  brightblack, brightred, ..., brightxxxxx

# ステータスライン - Left
#   #(shell-command) コマンド実行結果(1行目のみ)
#   #[attributes] カラーor属性 変更
#   #H ローカルホスト名
#   #h ローカルホスト名(ドメインなし)
#   #F カレントウィンドウのフラグ
#   #I カレントウィンドウ番号
#   #P カレントペイン番号
#   #S セッション名
#   #T カレントペインタイトル
#   #W カレントウィンドウ名
#   ## #文字
#
set -g status-left " #[fg=black,bold]#I-#P #20(whoami)#[default] >"
# Leftの表示領域の最大長
set -g status-left-length 20

#
# ステータスライン - Right
#   #y 年 (西暦の下二桁)
#   #m 月
#   #d 日
#   #H 時 (24時間表示)
#   #M 分
#   #S 秒
#
set -g status-right '< #[fg=black,bold]#(echo $LANG)#[default] < #[fg=blue]up #(pc-running-time)#[default] < #[fg=magenta]LAve.[#(loadaverage)] Mem #(used-mem)%%#[default] < #[fg=red,bold]%y/%m/%d(%a) %H:%M:%S#[default] '
# Rightの表示領域最大長
set -g status-right-length 90

#
# カラー
#
# ステータスラインカラー
set -g status-fg black
set -g status-bg brightgreen

# メッセージ
set -g message-attr bold
set -g message-fg white
set -g message-bg red

# ペインのボーダーカラー
set -g pane-border-fg brightgreen
set -g pane-border-bg black

# アクティブなペインのボーダーカラー
set -g pane-active-border-fg brightgreen
set -g pane-active-border-bg black

# コピーモードのカラー
set-window-option -g mode-fg black
set-window-option -g mode-bg white

# ウィンドウのステータスライン
set-window-option -g window-status-fg black
set-window-option -g window-status-bg brightgreen
set-window-option -g window-status-attr bold

# カレントウィンドウのステータスライン
set-window-option -g window-status-current-fg brightwhite
set-window-option -g window-status-current-bg brightblue
set-window-option -g window-status-current-attr underscore

#
# Key Binding
#  <prefix>? 現在のキー割り当てを表示
#
# Prefixキー
# デフォルトPrefix無効
unbind C-b
set-option -g prefix C-o
bind o send-prefix

# 設定リロード
bind r source-file ~/.tmux.conf; display-message "Reload Config!!"
# キーバインド表示
#bind ? list-keys
# viコピーモードのキーバインド表示
bind / list-keys -t vi-copy
# リフレッシュ
bind ^r refresh-client
# クライアントリストを表示
bind * list-clients
# デタッチ
bind d detach

## ウィンドウ関連
# ウィンドウ生成
bind c new-window
# ウィンドウリスト
bind w choose-window
# ウィンドウ移動
bind h previous-window
bind j previous-window
bind k next-window
bind l next-window
bind -r Space next-window
bind ^a last-window
# ウィンドウ分割
bind s split-window -v
bind v split-window -h
# ウィンドウタイトル変更
bind A command-prompt -I "#W" "rename-window %%"
# ウィンドウ終了
bind ^q confirm-before -p "kill-window #W? (y/n)" kill-window
# 全ウィンドウ終了(確認付き)
bind \ confirm-before -p "kill-server? (y/n)" kill-server

## ペイン関連
# ペイン移動
bind -r Tab select-pane -t :.-
bind -r BTab select-pane -t :.+
bind ^h select-pane -L
bind ^j select-pane -D
bind ^k select-pane -U
bind ^l select-pane -R
# ペインのリサイズ
bind -r H resize-pane -L 6
bind -r J resize-pane -D 6
bind -r K resize-pane -U 6
bind -r L resize-pane -R 6
# 分割していたペインをウィンドウへ
bind b break-pane
# ペイン終了
#bind x confirm-before -p "kill-pane #P? (y/n)" kill-pane

# copy-mode
#   1画面内のコピー方法
#     Terminalのマウス機能を使用
#
#   1画面以上のコピー方法
#     <prefix>y でコピーモードに入り、viキーバインドで移動、
#     <space>で範囲選択モードに入り、Enterでtmuxのコピーバッファへコピー
#     <prefix>^y でコピーバッファの内容をクリップボードへ
#
bind y copy-mode
bind -r ^"[" copy-mode
bind ^y run-shell 'tmux-pbcopy'
bind p paste-buffer
bind -r ^] paste-buffer
# 1行コピー
bind-key -t vi-copy Y copy-line
# マーク開始
#bind -t vi-copy v begin-selection
# ヤンク
#bind -t vi-copy y copy-selection


#
# Unbind key
#
# suspend client
unbind ^z
# break-pane
unbind !
# split-window
unbind "\""
# split-window -h
unbind %
# kill-window
unbind &

# zshでpbcopy(Mac only)
#  Mac以外では使用不可なためラッパースクリプトを使用(tmuxx)
# set-option -g default-command "reattach-to-user-namespace -l zsh"
